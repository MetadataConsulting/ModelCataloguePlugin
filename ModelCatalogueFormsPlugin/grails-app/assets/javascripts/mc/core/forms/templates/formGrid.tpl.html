<div class="col-md-12 metadata-form-item-content"
     ng-init="grid = {'value': (element.ext.get('http://forms.modelcatalogue.org/group#grid') ?
        (element.ext.get('http://forms.modelcatalogue.org/group#grid') == 'false' ? false : true) : false)}">

  <div class="alert alert-warning" ng-if="editableForm.$visible">
    The grid group metadata only applies on the direct children of the form's section model (grand children of root model) and is ignored for any other nested models.
  </div>

  <table class="table table-condensed table-striped table-borderless table-no-margin small">

    <tr ng-if="view.handlesKey('http://forms.modelcatalogue.org/group#grid')">
      <th class="col-md-3">
        Grid
        <i class="fa fa-question"
           popover="Make this model a repeatable group (grid)"
           popover-title="Grid"
           popover-trigger="mouseenter"></i>
      </th>
      <td class="full-width-editable">
        <span editable-checkbox="extAsMap['http://forms.modelcatalogue.org/group#grid']"
              class="small" e-string-to-boolean e-ng-change="grid.value = !grid.value">
          {{element.ext.get('http://forms.modelcatalogue.org/group#grid') ?
              (element.ext.get('http://forms.modelcatalogue.org/group#grid') == "false" ? "No": "Yes") : "" }}
        </span>
      </td>
    </tr>

    <tr ng-if="view.handlesKey('http://forms.modelcatalogue.org/group#header')">
      <th class="col-md-3">
        Header
        <i class="fa fa-question"
           popover="
              The value is displayed above the GRID when a user is performing data entry. Defaults to model's name

              This value is like a title for the group. An example of a GROUP_HEADER would be 'Medications Log.'

              Can contain up to 5 characters."
           popover-title="Header"
           popover-trigger="mouseenter"></i>
      </th>
      <td class="full-width-editable">
        <span editable-text="extAsMap['http://forms.modelcatalogue.org/group#header']" class="small"
              e-maxlength="64" e-rows="5" e-ng-disabled="!grid.value">
          {{element.ext.get('http://forms.modelcatalogue.org/group#header')}}
        </span>
      </td>
    </tr>

    <tr ng-if="view.handlesKey('http://forms.modelcatalogue.org/group#repeatNum')">
      <th class="col-md-3">
        Initial Number of Rows (default 1)
        <i class="fa fa-question"
           popover="
              The default (initial) number of repeats on the form should be provided here. If left blank, only one row
              of information will be displayed by default.

              This field should be used to specify how many rows of data should exist for the item group upon initiation
              of data entry, or in printing of a blank CRF from OpenClinica. If three rows of information, specify the
              number 3 in the field. When a user accesses the CRF, the row will be repeated 3 times by default.

              A user will be allowed to add more rows up to the GROUP_REPEAT_MAX and even remove some of the rows
              displayed by default."
           popover-title="Initial Number of Rows"
           popover-trigger="mouseenter"></i>
      </th>
      <td class="full-width-editable">
        <span editable-number="extAsMap['http://forms.modelcatalogue.org/group#repeatNum']" class="small"
              e-min="1" e-rows="5" e-ng-disabled="!grid.value" e-string-to-number>
          {{element.ext.get('http://forms.modelcatalogue.org/group#repeatNum')}}
        </span>
      </td>
    </tr>

    <tr ng-if="view.handlesKey('http://forms.modelcatalogue.org/group#repeatMax')">
      <th class="col-md-3">
        Max Number of Rows (default 40)
        <i class="fa fa-question"
           popover="
              The total number of rows a user will be allowed to repeat in the item group.  When left blank, the default
              number of repeats is 40.

              This field should be used to restrict users to a certain number of repeats for the GRID.  However, this
              restriction works only if data are entered through OpenClinica Web UI. If data are imported using
              Task-> Import Data option or through web services, all rows of data in the import file will be allowed to
              import, even if the rows of data in the import exceed the GROUP_REPEAT_MAX.

              If GROUP_REPEAT_MAX is less than GROUP_REPEAT_NUMBER group will have GROUP_REPEAT_MAX number of rows on
              initial data entry displayed and no additional rows can be added."
           popover-title="Max Number of Rows"
           popover-trigger="mouseenter"></i>
      </th>
      <td class="full-width-editable">
        <span editable-number="extAsMap['http://forms.modelcatalogue.org/group#repeatMax']" class="small"
              e-min="1" e-rows="5" e-ng-disabled="!grid.value" e-string-to-number>
          {{element.ext.get('http://forms.modelcatalogue.org/group#repeatMax')}}
        </span>
      </td>
    </tr>
  </table>
</div>
